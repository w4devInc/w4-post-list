!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e){t.exports=window.wp.element},function(t,e){t.exports=window.wp.i18n},function(t,e){t.exports=window.wp.components},function(t,e){t.exports=window.wp.blocks},function(t,e){t.exports=window.wp.blockEditor},function(t,e){t.exports=window.wp.apiFetch},function(t,e){t.exports=window.wp.serverSideRender},function(t,e,n){"use strict";n.r(e);var o=n(3),i=n(1),s=n(0),r=n(2),l=n(4),c=n(5),a=n.n(c),p=n(6),u=n.n(p);class d extends s.Component{constructor(t){super(t),this.state={choices:[]},this.onListSearch=this.onListSearch.bind(this),this.onListSelect=this.onListSelect.bind(this)}componentDidMount(){const{listId:t}=this.props.attributes;parseInt(t,10)>0&&this.loadChoices({include:t})}loadChoices({search:t,include:e}){let n="/wp/v2/w4pl?_fields=id,title&status=publish,pending,draft&per_page=10&_locale=user";t&&(n+="&search="+t),e&&(n+="&include[]="+e),a()({path:n}).then(t=>{const e=this.formatChoices(t);this.setState({choices:e})})}formatChoices(t){return t?t.map(t=>({value:t.id.toString(),label:`${t.title.rendered} (#${t.id})`})):[]}onListSearch(t){this.loadChoices({search:t})}onListSelect(t){this.props.setAttributes({listId:t})}render(){const{attributes:t}=this.props,{choices:e}=this.state;return Object(s.createElement)(s.Fragment,null,Object(s.createElement)(l.InspectorControls,null,Object(s.createElement)(r.PanelBody,{title:Object(i.__)("Settings","w4-post-list")},Object(s.createElement)(r.PanelRow,null,Object(s.createElement)(r.ComboboxControl,{label:"Select a list",value:t.listId,options:e,onChange:this.onListSelect,onFilterValueChange:this.onListSearch})),Object(s.createElement)(r.PanelRow,null,Object(s.createElement)("p",null,Object(i.__)("Or","w4-post-list")," ",Object(s.createElement)("a",{target:"_blank",href:"post-new.php?post_type=w4pl"},Object(i.__)("Create a new one","w4-post-list")))))),Object(s.createElement)(r.Disabled,null,Object(s.createElement)(u.a,{block:"w4-post-list/postlist",attributes:t})))}}Object(o.registerBlockType)("w4-post-list/postlist",{title:Object(i.__)("W4 Post List","w4-post-list"),description:Object(i.__)("Display a list from w4 post list plugin.","w4-post-list"),supports:{align:!1,html:!1},icon:"list-view",category:"widgets",attributes:{listId:{type:"string",default:""}},edit:d})}]);